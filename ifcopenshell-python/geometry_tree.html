<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Selector syntax" href="selector_syntax.html" /><link rel="prev" title="Geometry creation" href="geometry_creation.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.05.06 -->
        <title>Geometry tree - IfcOpenShell 0.7.10 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=aefb6c79" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=c85da206" />
    
    


<style>
  body {
    --color-code-background: #282C34;
  --color-code-foreground: #ABB2BF;
  --color-brand-primary: #39b54a;
  --color-brand-content: #39b54a;
  --color-brand-visited: #d9e021;
  --color-background-primary: #f7f7f6;
  --color-background-secondary: #eeeeec;
  --color-background-border: #cfd0cb;
  --color-foreground-primary: #2e3436;
  --color-sidebar-item-background--hover: #f7f7f6;
  --color-link: #39b54a;
  --color-link--visited: #39b54a;
  --color-link--hover: #d98014;
  --color-link--visited--hover: #d98014;
  --font-stack: Nunito, -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #282C34;
  --color-code-foreground: #ABB2BF;
  --color-brand-primary: #39b54a;
  --color-brand-content: #39b54a;
  --color-brand-visited: #d9e021;
  --color-background-primary: #2e3436;
  --color-background-border: #2e3436;
  --color-foreground-primary: #eeeeec;
  --color-sidebar-item-background--hover: #2e3436;
  --color-link: #39b54a;
  --color-link--visited: #39b54a;
  --color-link--hover: #d98014;
  --color-link--visited--hover: #d98014;
  --font-stack: Nunito, -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #282C34;
  --color-code-foreground: #ABB2BF;
  --color-brand-primary: #39b54a;
  --color-brand-content: #39b54a;
  --color-brand-visited: #d9e021;
  --color-background-primary: #2e3436;
  --color-background-border: #2e3436;
  --color-foreground-primary: #eeeeec;
  --color-sidebar-item-background--hover: #2e3436;
  --color-link: #39b54a;
  --color-link--visited: #39b54a;
  --color-link--hover: #d98014;
  --color-link--visited--hover: #d98014;
  --font-stack: Nunito, -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">IfcOpenShell 0.7.10 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="https://ifcopenshell.org/assets/images/logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">IfcOpenShell 0.7.10 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Main:</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../introduction.html">Introduction</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Introduction</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction/introduction_to_bim.html">Introduction to BIM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/introduction_to_ifc.html">Introduction to IFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/how_to_contribute.html">How to contribute</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ifcopenshell.html">IfcOpenShell</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of IfcOpenShell</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ifcopenshell/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ifcopenshell/geometry_iterator.html">Geometry iterator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ifcopenshell/geometry_settings.html">Geometry settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ifcopenshell/boolean_process.html">Boolean process</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../ifcopenshell-python.html">IfcOpenShell-Python</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of IfcOpenShell-Python</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="hello_world.html">Hello, world!</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_examples.html">Code examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="geometry_processing.html">Geometry processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="geometry_creation.html">Geometry creation</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Geometry tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="selector_syntax.html">Selector syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="developer_guide.html">Developer Guide</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ifcconvert.html">IfcConvert</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of IfcConvert</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ifcconvert/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ifcconvert/usage.html">Usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../blenderbim.html">BlenderBIM Add-on</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Utilities:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bcf.html">BCF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bimserver-plugin.html">BIMServer-Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bimtester.html">BIMTester</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bsdd.html">bSDD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ifc2ca.html">Ifc2CA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ifc4d.html">Ifc4D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ifc5d.html">Ifc5D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ifccityjson.html">IfcCityJSON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ifcclash.html">IfcClash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ifccsv.html">IfcCSV</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ifcdiff.html">IfcDiff</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ifcfm.html">IfcFM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ifcmax.html">IfcMax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ifcpatch.html">IfcPatch</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ifcsverchok.html">IfcSverchok</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of IfcSverchok</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ifcsverchok/installation.html">Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ifctester.html">IfcTester</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other.html">Other utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://ifcopenshell.github.io/docs/rst_files/library_root.html">C++ API Reference</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../autoapi/index.html">Python API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Python API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../indices.html">Indices and tables</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/IfcOpenShell/IfcOpenShell/blob/v0.8.0/src/ifcopenshell-python/docs/ifcopenshell-python/geometry_tree.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/IfcOpenShell/IfcOpenShell/edit/v0.8.0/src/ifcopenshell-python/docs/ifcopenshell-python/geometry_tree.rst" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="geometry-tree">
<h1>Geometry tree<a class="headerlink" href="#geometry-tree" title="Link to this heading">¶</a></h1>
<p>IfcOpenShell includes a utility to build trees of geometry and their bounding
boxes. Geometry trees can be used to efficiently select geometry or collide
geometry with one another.</p>
<img alt="../_images/geometry-tree.png" src="../_images/geometry-tree.png" />
<p>The most efficient way to build a tree is by using the iterator. If the native
OpenCASCADE shape is added to the tree, a <strong>UB Tree</strong> is built.  Alternatively,
if triangulation is added to the tree, a <strong>BVH Tree</strong> is built. The type of
tree determines the type of operation you can perform.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">multiprocessing</span>
<span class="kn">import</span> <span class="nn">ifcopenshell</span>
<span class="kn">import</span> <span class="nn">ifcopenshell.geom</span>

<span class="n">tree</span> <span class="o">=</span> <span class="n">ifcopenshell</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">tree</span><span class="p">()</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">ifcopenshell</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">settings</span><span class="p">()</span>
<span class="n">iterator</span> <span class="o">=</span> <span class="n">ifcopenshell</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">iterator</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">ifc_file</span><span class="p">,</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">())</span>
<span class="k">if</span> <span class="n">iterator</span><span class="o">.</span><span class="n">initialize</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># Use triangulation to build a BVH tree</span>
        <span class="n">tree</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="n">iterator</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

        <span class="c1"># Alternatively, use this code to build an unbalanced binary tree</span>
        <span class="c1"># tree.add_element(iterator.get_native())</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">iterator</span><span class="o">.</span><span class="n">next</span><span class="p">():</span>
            <span class="k">break</span>
</pre></div>
</div>
<section id="clashing-or-selecting-geometry-from-a-geometry-tree">
<h2>Clashing or selecting geometry from a geometry tree<a class="headerlink" href="#clashing-or-selecting-geometry-from-a-geometry-tree" title="Link to this heading">¶</a></h2>
<p>With a <strong>BVH Tree</strong>, you can efficiently clash sets of elements with other
elements.  You can find elements that intersect, collide, or are within a
clearance distance threshold of one another. There are three methods you can
use to clash elements in the tree. Each function collides one set of elements
with another set of elements.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#detecting-intersection-clashes-between-elements">Detecting intersection clashes between elements</a> detects when an element intersects with another
element. This is the most common type of clash detection used when
coordinating designs. For example, you might want to know if any pipes go
through structural columns or beams.</p></li>
<li><p><a class="reference internal" href="#detecting-collision-clashes-between-elements">Detecting collision clashes between elements</a> detects when an element
touches another element. It is the fastest type of clash detection but does
not consider the distance that an element goes inside another element. This
considers surfaces only so it works on non-manifold geometry but will not
detect if an element is completely within another element.</p></li>
<li><p><a class="reference internal" href="#detecting-clearance-clashes-between-elements">Detecting clearance clashes between elements</a> detects when an element comes
near to another element within a clearance threshold. This is the slowest
type of clash detection. It works on non-manifold geometry and does not
consider inside vs outside. Elements like pipe and ducts with insulation,
structural openings, and equipment will typically require clearance checks.</p></li>
</ul>
<p>With a <strong>UB Tree</strong>, you can efficiently select geometry by specifying a point,
radius, or bounding box. There are three methods you can use to select elements
in the tree.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#selecting-elements-using-bounding-boxes">Selecting elements using bounding boxes</a> lets you query for elements that
contain a point or another element. However, it only checks the bounding box
of elements instead of their exact geometry. This is the fastest approach and
is recommended if you don’t need precise geometry selection.</p></li>
<li><p><a class="reference internal" href="#selecting-elements-using-precise-geometry">Selecting elements using precise geometry</a> lets you query for elements that
contain a point, a sphere, or another element. This is similar to selecting
using bounding boxes, but additionally considers the actual geometry of the
element. This is slower but more precise.</p></li>
<li><p><a class="reference internal" href="#selecting-elements-using-a-ray">Selecting elements using a ray</a> lets you query for elements that intersect
with a ray.</p></li>
</ul>
</section>
<section id="detecting-intersection-clashes-between-elements">
<h2>Detecting intersection clashes between elements<a class="headerlink" href="#detecting-intersection-clashes-between-elements" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">clash_intersection_many</span></code> detects when an element intersects with or is
contained within another element.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">clashes</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">clash_intersection_many</span><span class="p">(</span>
    <span class="n">group_a_elements</span><span class="p">,</span> <span class="c1"># e.g. from model.by_type(&quot;IfcWall&quot;)</span>
    <span class="n">group_b_elements</span><span class="p">,</span> <span class="c1"># Group b can be the same as group a if you want to clash within a single set</span>
    <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.002</span><span class="p">,</span> <span class="c1"># Any protrusions less than 2mm are ignored</span>
    <span class="n">check_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1"># Keep on checking all potential intersections to find a worst case protrusion distance</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">clash</span> <span class="ow">in</span> <span class="n">clashes</span><span class="p">:</span>
    <span class="c1"># Get the two elements that clash and their metadata</span>
    <span class="n">element1</span> <span class="o">=</span> <span class="n">clash</span><span class="o">.</span><span class="n">a</span>
    <span class="n">element2</span> <span class="o">=</span> <span class="n">clash</span><span class="o">.</span><span class="n">b</span>
    <span class="n">a_global_id</span> <span class="o">=</span> <span class="n">element1</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">b_global_id</span> <span class="o">=</span> <span class="n">element2</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">a_ifc_class</span> <span class="o">=</span> <span class="n">element1</span><span class="o">.</span><span class="n">is_a</span><span class="p">()</span>
    <span class="n">b_ifc_class</span> <span class="o">=</span> <span class="n">element2</span><span class="o">.</span><span class="n">is_a</span><span class="p">()</span>
    <span class="n">a_name</span> <span class="o">=</span> <span class="n">element1</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">b_name</span> <span class="o">=</span> <span class="n">element2</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Potential clash types that can be detected are protrusions, pierces, and collisions</span>
    <span class="n">clash_type</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;protrusion&quot;</span><span class="p">,</span> <span class="s2">&quot;pierce&quot;</span><span class="p">,</span> <span class="s2">&quot;collision&quot;</span><span class="p">,</span> <span class="s2">&quot;clearance&quot;</span><span class="p">][</span><span class="n">clash</span><span class="o">.</span><span class="n">clash_type</span><span class="p">],</span>

    <span class="c1"># P1 and P2 represents two XYZ coordinates. The meaning of the coordinate depends on the clash type.</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">clash</span><span class="o">.</span><span class="n">p1</span><span class="p">)</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">clash</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>

    <span class="c1"># This represents the protrusion or piercing distance in meters.</span>
    <span class="c1"># It is also the distance between P1 and P2.</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="n">clash</span><span class="o">.</span><span class="n">distance</span>
</pre></div>
</div>
<p>If you specify a <code class="docutils literal notranslate"><span class="pre">tolerance</span></code> value, intersections with a protrusion distance
smaller than this tolerance are excluded. It is recommended to specify a
non-zero tolerance to distinguish between when elements merely touch (e.g. a
GPO on a wall) versus if they are truly intersecting (e.g. a pipe going through
a beam).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">check_all</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, the clash check will return as soon as an
intersection is found. This is faster but may not return the worst-case
protrusion distance. If you are not interested in the protrusion distance, it
is recommended to set this to <code class="docutils literal notranslate"><span class="pre">False</span></code>. If you want the protrusion distance,
such as to prioritise which clashes are more severe, set this to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>This includes:</p>
<ol class="arabic simple">
<li><p>When an element X protrudes inside element Y, where element Y is manifold.
In this case, a protrusion distance is calculated as the deepest point of
element X to the closest surface of element Y. <code class="docutils literal notranslate"><span class="pre">P1</span></code> is defined as the XYZ
coordinate on element X, and <code class="docutils literal notranslate"><span class="pre">P2</span></code> is defined as the nearest point on the
surface of element Y.</p></li>
<li><p>When an element X pierces element Y, such that an edge of element X enters
element Y and leaves through another face. In this case, a piercing distance
is calculated as the distance where that edge is inside element Y. <code class="docutils literal notranslate"><span class="pre">P1</span></code> is
defined as the point on an edge of element X which enters element Y, and
<code class="docutils literal notranslate"><span class="pre">P2</span></code> is the point where that edge leaves element Y.</p></li>
<li><p>When neither X or Y is manifold, we cannot detect protrusion or piercing, so
instead when X and Y have any touching face. This is the same as the
<code class="docutils literal notranslate"><span class="pre">clash_collision_many</span></code> check below. The distance is considered to be zero
and ignores your specified tolerance. <code class="docutils literal notranslate"><span class="pre">P1</span></code> and <code class="docutils literal notranslate"><span class="pre">P2</span></code> are equal and
represent an arbitrary XYZ point where the two elements touch.</p></li>
</ol>
</section>
<section id="detecting-collision-clashes-between-elements">
<h2>Detecting collision clashes between elements<a class="headerlink" href="#detecting-collision-clashes-between-elements" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">clash_collision_many</span></code> detects when the surface of an element collides with
another element. The surfaces may either merely touch (e.g. are coplanar) or
intersect.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">clashes</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">clash_collision_many</span><span class="p">(</span>
    <span class="n">group_a_elements</span><span class="p">,</span> <span class="c1"># e.g. from model.by_type(&quot;IfcWall&quot;)</span>
    <span class="n">group_b_elements</span><span class="p">,</span> <span class="c1"># Group b can be the same as group a if you want to clash within a single set</span>
    <span class="n">allow_touching</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1"># Include results where faces merely touch but do not intersect</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">clash</span> <span class="ow">in</span> <span class="n">clashes</span><span class="p">:</span>
    <span class="c1"># Get the two elements that clash and their metadata</span>
    <span class="n">element1</span> <span class="o">=</span> <span class="n">clash</span><span class="o">.</span><span class="n">a</span>
    <span class="n">element2</span> <span class="o">=</span> <span class="n">clash</span><span class="o">.</span><span class="n">b</span>
    <span class="n">a_global_id</span> <span class="o">=</span> <span class="n">element1</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">b_global_id</span> <span class="o">=</span> <span class="n">element2</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">a_ifc_class</span> <span class="o">=</span> <span class="n">element1</span><span class="o">.</span><span class="n">is_a</span><span class="p">()</span>
    <span class="n">b_ifc_class</span> <span class="o">=</span> <span class="n">element2</span><span class="o">.</span><span class="n">is_a</span><span class="p">()</span>
    <span class="n">a_name</span> <span class="o">=</span> <span class="n">element1</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">b_name</span> <span class="o">=</span> <span class="n">element2</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># P1 and P2 represents two possible arbitrary points where a collision is found.</span>
    <span class="c1"># P1 may or may not be equal to P2.</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">clash</span><span class="o">.</span><span class="n">p1</span><span class="p">)</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">clash</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>
</pre></div>
</div>
<p>A collision between two surface triangles may be “touching” or “intersecting”.
Two touching triangles may be coplanar or merely have a single edge or vertex
touching the other triangle. An intersecting triangle will have at least one
edge that goes through the other triangle.</p>
</section>
<section id="detecting-clearance-clashes-between-elements">
<h2>Detecting clearance clashes between elements<a class="headerlink" href="#detecting-clearance-clashes-between-elements" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">clash_clearance_many</span></code> detects with the surface of an element comes within a
clearance distance threshold of another element.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">clashes</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">clash_clearance_many</span><span class="p">(</span>
    <span class="n">group_a_elements</span><span class="p">,</span> <span class="c1"># e.g. from model.by_type(&quot;IfcWall&quot;)</span>
    <span class="n">group_b_elements</span><span class="p">,</span> <span class="c1"># Group b can be the same as group a if you want to clash within a single set</span>
    <span class="n">clearance</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="c1"># Any surface closer than than 100mm is a clash</span>
    <span class="n">check_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="c1"># Stop measuring distances once the first clearance violation is found per element.</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">clash</span> <span class="ow">in</span> <span class="n">clashes</span><span class="p">:</span>
    <span class="c1"># Get the two elements that clash and their metadata</span>
    <span class="n">element1</span> <span class="o">=</span> <span class="n">clash</span><span class="o">.</span><span class="n">a</span>
    <span class="n">element2</span> <span class="o">=</span> <span class="n">clash</span><span class="o">.</span><span class="n">b</span>
    <span class="n">a_global_id</span> <span class="o">=</span> <span class="n">element1</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">b_global_id</span> <span class="o">=</span> <span class="n">element2</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">a_ifc_class</span> <span class="o">=</span> <span class="n">element1</span><span class="o">.</span><span class="n">is_a</span><span class="p">()</span>
    <span class="n">b_ifc_class</span> <span class="o">=</span> <span class="n">element2</span><span class="o">.</span><span class="n">is_a</span><span class="p">()</span>
    <span class="n">a_name</span> <span class="o">=</span> <span class="n">element1</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">b_name</span> <span class="o">=</span> <span class="n">element2</span><span class="o">.</span><span class="n">get_argument</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># P1 and P2 represents the two XYZ coordinates between element1 and element2.</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">clash</span><span class="o">.</span><span class="n">p1</span><span class="p">)</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">clash</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>

    <span class="c1"># This represents the distance between element1 and element2 that is less than the clearance.</span>
    <span class="c1"># It is the distance between P1 and P2. It cannot be less than 0.</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="n">clash</span><span class="o">.</span><span class="n">distance</span>
</pre></div>
</div>
<p>You cannot specify a <code class="docutils literal notranslate"><span class="pre">clearance</span></code> less than 0.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">check_all</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, the clash check will return as soon as a
clearance violation is found. This is faster but may not return the worst-case
distance. If you only interested whether there is a clearance issue, it is
recommended to set this to <code class="docutils literal notranslate"><span class="pre">False</span></code>. If you want the exact worst case
clearance distance, such as to prioritise which clashes are more severe, set
this to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</section>
<section id="selecting-elements-using-bounding-boxes">
<h2>Selecting elements using bounding boxes<a class="headerlink" href="#selecting-elements-using-bounding-boxes" title="Link to this heading">¶</a></h2>
<p>Elements may be queried using an axis aligned bounding box. An axis aligned
bounding box is the bounding box using global XYZ axes, not the element’s local
XYZ axes. If you have a vertical construction project, this means that your
model should be oriented to project north to get the best results.</p>
<p>You may select all elements that have a bounding box containing the point with
XYZ coordinates of <code class="docutils literal notranslate"><span class="pre">(0.,</span> <span class="pre">0.,</span> <span class="pre">0.)</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This will return a list of elements.</span>
<span class="c1"># E.g.: [#66=IfcFurniture(&#39;3I53aQSFrFhRRaMHWNp8pD&#39;, ...), #96=IfcFurniture(&#39;0t5avJ3o956wj73wyBw0nO&#39;, ...)]</span>
<span class="n">elements</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">select_box</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All coordinates and length arguments must be specified in meters.</p>
</div>
<p>You may select all elements based on another element’s bounding box. It will
return:</p>
<ol class="arabic simple">
<li><p>The queried element itself (i.e. a wall in this example)</p></li>
<li><p>Any elements fully contained by the wall</p></li>
<li><p>Any elements fully containing the wall</p></li>
<li><p>Any elements intersecting the wall</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">wall</span> <span class="o">=</span> <span class="n">ifc_file</span><span class="o">.</span><span class="n">by_type</span><span class="p">(</span><span class="s2">&quot;IfcWall&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">elements</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">select_box</span><span class="p">(</span><span class="n">wall</span><span class="p">)</span>
</pre></div>
</div>
<p>You may also select elements that are completely within another element’s
bounding box. It will return:</p>
<ol class="arabic simple">
<li><p>The queried element itself (i.e. a wall in this example)</p></li>
<li><p>Any elements fully contained by the wall</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">elements</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">select_box</span><span class="p">(</span><span class="n">wall</span><span class="p">,</span> <span class="n">completely_within</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Alternatively, you may also specify an extension to dilate the bounding</span>
<span class="c1"># box of the wall.</span>
<span class="n">elements</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">select_box</span><span class="p">(</span><span class="n">wall</span><span class="p">,</span> <span class="n">completely_within</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="mf">5.</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="selecting-elements-using-precise-geometry">
<h2>Selecting elements using precise geometry<a class="headerlink" href="#selecting-elements-using-precise-geometry" title="Link to this heading">¶</a></h2>
<p>You may select all elements that have geometry containing the point with XYZ
coordinates of <code class="docutils literal notranslate"><span class="pre">(0.,</span> <span class="pre">0.,</span> <span class="pre">0.)</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">elements</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">select</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All coordinates and length arguments must be specified in meters.</p>
</div>
<p>You may also select all elements that have geometry intsecting with a sphere,
represented by a centerpoint and a radius. This will return:</p>
<ol class="arabic simple">
<li><p>Any elements fully contained by the sphere</p></li>
<li><p>Any elements intersecting the sphere</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This extension is also in meters.</span>
<span class="n">elements</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">select</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span> <span class="n">extend</span><span class="o">=</span><span class="mf">5.</span><span class="p">)</span>
</pre></div>
</div>
<p>You may select all elements based on another element’s geometry. It will
return:</p>
<ol class="arabic simple">
<li><p>The queried element itself (i.e. a wall in this example)</p></li>
<li><p>Any elements fully contained by the wall</p></li>
<li><p>Any elements fully containing the wall</p></li>
<li><p>Any elements intersecting the wall</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">wall</span> <span class="o">=</span> <span class="n">ifc_file</span><span class="o">.</span><span class="n">by_type</span><span class="p">(</span><span class="s2">&quot;IfcWall&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">elements</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">wall</span><span class="p">)</span>
</pre></div>
</div>
<p>You may also select elements that are completely within another element’s
geometry. It will return:</p>
<ol class="arabic simple">
<li><p>The queried element itself (i.e. a wall in this example)</p></li>
<li><p>Any elements fully contained by the wall</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">elements</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">wall</span><span class="p">,</span> <span class="n">completely_within</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Alternatively, you may also specify an extension to dilate the geometry</span>
<span class="c1"># of the wall.</span>
<span class="n">elements</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">wall</span><span class="p">,</span> <span class="n">completely_within</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="mf">5.</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="selecting-elements-using-a-ray">
<h2>Selecting elements using a ray<a class="headerlink" href="#selecting-elements-using-a-ray" title="Link to this heading">¶</a></h2>
<p>You may select all elements that intersect with a ray. A ray is not infinite,
but instead must have a length. The default length is 1000 meters.</p>
<p>This returns a list of ray intersection results, which contain information
about the element it intersects with along with the point of intersection. This
may mean that the same element is returned multiple times if it intersects
multiple times.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">origin</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">direction</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">select_ray</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">5.</span><span class="p">)</span>

<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ifc_file</span><span class="o">.</span><span class="n">by_id</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">instance</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span> <span class="c1"># The element the ray intersects with</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">position</span><span class="p">))</span> <span class="c1"># The XYZ intersection point</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="c1"># The distance between the ray origin and the intersection</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">normal</span><span class="p">))</span> <span class="c1"># The normal of the face being intersected</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">dot_product</span><span class="p">)</span> <span class="c1"># The dot product of the face being intersected with the ray</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="selector_syntax.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Selector syntax</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="geometry_creation.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Geometry creation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2011-2024 IfcOpenShell Contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://ifcopenshell.org" aria-label="IfcOpenShell">
                <img src="https://ifcopenshell.org/assets/images/logo.png" style="width: auto;" />
            </a>
              <a class="muted-link " href="https://github.com/IfcOpenShell/IfcOpenShell/tree/v0.8.0/src/ifcopenshell-python/docs" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Geometry tree</a><ul>
<li><a class="reference internal" href="#clashing-or-selecting-geometry-from-a-geometry-tree">Clashing or selecting geometry from a geometry tree</a></li>
<li><a class="reference internal" href="#detecting-intersection-clashes-between-elements">Detecting intersection clashes between elements</a></li>
<li><a class="reference internal" href="#detecting-collision-clashes-between-elements">Detecting collision clashes between elements</a></li>
<li><a class="reference internal" href="#detecting-clearance-clashes-between-elements">Detecting clearance clashes between elements</a></li>
<li><a class="reference internal" href="#selecting-elements-using-bounding-boxes">Selecting elements using bounding boxes</a></li>
<li><a class="reference internal" href="#selecting-elements-using-precise-geometry">Selecting elements using precise geometry</a></li>
<li><a class="reference internal" href="#selecting-elements-using-a-ray">Selecting elements using a ray</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=d46e566c"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    </body>
</html>